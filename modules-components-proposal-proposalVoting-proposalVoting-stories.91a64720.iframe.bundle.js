"use strict";(self.webpackChunk_aragon_ods=self.webpackChunk_aragon_ods||[]).push([[4822],{"./src/modules/components/proposal/proposalVoting/proposalVoting.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MultiStage:()=>MultiStage,SingleStage:()=>SingleStage,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var luxon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/luxon/src/luxon.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core/index.ts"),_vote__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/modules/components/vote/index.ts"),_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/modules/components/proposal/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const meta={title:"Modules/Components/Proposal/ProposalVoting/ProposalVoting",component:_index__WEBPACK_IMPORTED_MODULE_4__.ay.Container,parameters:{design:{type:"figma",url:"https://www.figma.com/design/ISSDryshtEpB7SUSdNqAcw/Aragon-ODS?node-id=16752-20193&m=dev"}}},getTotalVotes=(votes,indicator)=>votes.reduce(((accumulator,{voteIndicator,votingPower})=>accumulator+(voteIndicator===indicator?Number(votingPower):0)),0),filterVotes=(votes,search)=>votes.filter((vote=>null==search||0===search.length||vote.voter.address.includes(search)||vote.voter.name?.includes(search))),tokenVotes=[{voter:{address:"0x17366cae2b9c6C3055e9e3C78936a69006BE5409",name:"cgero.eth"},isDelegate:!0,voteIndicator:"yes",votingPower:47289374,tokenSymbol:"ARA"},{voter:{address:"0xd5fb864ACfD6BB2f72939f122e89fF7F475924f5",name:"sio.eth"},voteIndicator:"yes",votingPower:1238948,tokenSymbol:"ARA"},{voter:{address:"0xF6ad40D5D477ade0C640eaD49944bdD0AA1fBF05"},voteIndicator:"no",votingPower:8495,tokenSymbol:"ARA"},{voter:{address:"0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045",name:"vitalik.eth"},voteIndicator:"abstain",votingPower:6942e4,tokenSymbol:"ARA"},{voter:{address:"0xe11BFCBDd43745d4Aa6f4f18E24aD24f4623af04",name:"cdixon.eth"},voteIndicator:"yes",votingPower:66749851,tokenSymbol:"ARA"}],multisigVotes=[{voter:{address:"0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7",name:"ens.eth"},voteIndicator:"approve"},{voter:{address:"0x650235a0889CAe912673AAD13Ff75d1F1A175487"},voteIndicator:"approve"},{voter:{address:"0xDCFfFFA68464A4AFC96EEf885844631A439cE625"},voteIndicator:"approve"},{voter:{address:"0x2536c09E5F5691498805884fa37811Be3b2BDdb4"},voteIndicator:"approve"}],tokenSettings=[{term:"Strategy",definition:"1 Token → 1 Vote"},{term:"Voting options",definition:"Yes, Abstain, or No"},{term:"Minimum support",definition:">50%"},{term:"Minimum participation (Quorum)",definition:"≥62.42K of 1M DEGEN (≥6.942)"},{term:"Early execution",definition:"Yes"},{term:"Vote replacement",definition:"No"},{term:"Minimum duration",definition:"7 days"}],getMultisigSettings=minApprovals=>[{term:"Strategy",definition:"1 Address → 1 Vote"},{term:"Voting options",definition:"Approve"},{term:"Minimum approval",definition:`${minApprovals} of 5`}],MultiStage={args:{title:"Voting",description:"The proposal must pass all governance stages to be accepted and potential onchain actions to execute.",activeStage:"0",className:"max-w-[560px]"},render:args=>{const[tokenSearch,setTokenSearch]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[multisigSearch,setMultisigSearch]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),filteredTokenVotes=filterVotes(tokenVotes,tokenSearch);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Container,{...args,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Stage,{name:"Token holder voting",status:_index__WEBPACK_IMPORTED_MODULE_4__.kc.ACTIVE,startDate:luxon__WEBPACK_IMPORTED_MODULE_0__.c9.now().toMillis(),endDate:luxon__WEBPACK_IMPORTED_MODULE_0__.c9.now().plus({days:5}).toMillis(),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.BreakdownToken,{tokenSymbol:"ARA",totalYes:getTotalVotes(tokenVotes,"yes"),totalNo:getTotalVotes(tokenVotes,"no"),totalAbstain:getTotalVotes(tokenVotes,"abstain"),supportThreshold:50,minParticipation:15,tokenTotalSupply:9451231259,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.Button,{variant:"primary",size:"md",className:"md:self-start",children:"Vote on proposal"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Votes,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Root,{itemsCount:filteredTokenVotes.length,entityLabel:"Votes",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Filter,{searchValue:tokenSearch,onSearchValueChange:setTokenSearch}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Container,{children:filteredTokenVotes.map((vote=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_vote__WEBPACK_IMPORTED_MODULE_3__.mt.Structure,{...vote},vote.voter.address)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Pagination,{})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Details,{settings:tokenSettings})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Stage,{name:"Founders approval",status:_index__WEBPACK_IMPORTED_MODULE_4__.kc.PENDING,startDate:luxon__WEBPACK_IMPORTED_MODULE_0__.c9.now().plus({days:7}).toMillis(),endDate:luxon__WEBPACK_IMPORTED_MODULE_0__.c9.now().plus({days:10}).toMillis(),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.BreakdownMultisig,{approvalsAmount:0,minApprovals:4}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Votes,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Root,{itemsCount:0,entityLabel:"Votes",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Filter,{searchValue:multisigSearch,onSearchValueChange:setMultisigSearch}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Container,{emptyState:{heading:"No votes",description:"Stage has no votes"}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Pagination,{})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Details,{settings:getMultisigSettings(4)})]})]})}},SingleStage={args:{title:"Voting",description:"The proposal must pass the voting to be accepted and potential onchain actions to execute.",className:"max-w-[560px]"},render:args=>{const[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),filteredVotes=filterVotes(multisigVotes,search);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Container,{...args,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Stage,{name:"Token holder voting",status:_index__WEBPACK_IMPORTED_MODULE_4__.kc.ACTIVE,startDate:luxon__WEBPACK_IMPORTED_MODULE_0__.c9.now().toMillis(),endDate:luxon__WEBPACK_IMPORTED_MODULE_0__.c9.now().plus({hours:7}).toMillis(),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.BreakdownMultisig,{approvalsAmount:multisigVotes.length,minApprovals:5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Votes,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Root,{itemsCount:filteredVotes.length,entityLabel:"Votes",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Filter,{searchValue:search,onSearchValueChange:setSearch}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Container,{children:filteredVotes.map((vote=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_vote__WEBPACK_IMPORTED_MODULE_3__.mt.Structure,{...vote},vote.voter.address)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_core__WEBPACK_IMPORTED_MODULE_2__.DataList.Pagination,{})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_index__WEBPACK_IMPORTED_MODULE_4__.ay.Details,{settings:getMultisigSettings(5)})]})})}},__WEBPACK_DEFAULT_EXPORT__=meta,__namedExportsOrder=["MultiStage","SingleStage"];MultiStage.parameters={...MultiStage.parameters,docs:{...MultiStage.parameters?.docs,source:{originalSource:"{\n  args: {\n    title: 'Voting',\n    description: 'The proposal must pass all governance stages to be accepted and potential onchain actions to execute.',\n    activeStage: '0',\n    className: 'max-w-[560px]'\n  },\n  render: args => {\n    const [tokenSearch, setTokenSearch] = useState<string | undefined>('');\n    const [multisigSearch, setMultisigSearch] = useState<string | undefined>('');\n    const filteredTokenVotes = filterVotes(tokenVotes, tokenSearch);\n    const minApprovals = 4;\n    return <ProposalVoting.Container {...args}>\n                <ProposalVoting.Stage name=\"Token holder voting\" status={ProposalVotingStatus.ACTIVE} startDate={DateTime.now().toMillis()} endDate={DateTime.now().plus({\n        days: 5\n      }).toMillis()}>\n                    <ProposalVoting.BreakdownToken tokenSymbol=\"ARA\" totalYes={getTotalVotes(tokenVotes, 'yes')} totalNo={getTotalVotes(tokenVotes, 'no')} totalAbstain={getTotalVotes(tokenVotes, 'abstain')} supportThreshold={50} minParticipation={15} tokenTotalSupply={9451231259}>\n                        <Button variant=\"primary\" size=\"md\" className=\"md:self-start\">\n                            Vote on proposal\n                        </Button>\n                    </ProposalVoting.BreakdownToken>\n                    <ProposalVoting.Votes>\n                        <DataList.Root itemsCount={filteredTokenVotes.length} entityLabel=\"Votes\">\n                            <DataList.Filter searchValue={tokenSearch} onSearchValueChange={setTokenSearch} />\n                            <DataList.Container>\n                                {filteredTokenVotes.map(vote => <VoteDataListItem.Structure key={vote.voter.address} {...vote} />)}\n                            </DataList.Container>\n                            <DataList.Pagination />\n                        </DataList.Root>\n                    </ProposalVoting.Votes>\n                    <ProposalVoting.Details settings={tokenSettings} />\n                </ProposalVoting.Stage>\n                <ProposalVoting.Stage name=\"Founders approval\" status={ProposalVotingStatus.PENDING} startDate={DateTime.now().plus({\n        days: 7\n      }).toMillis()} endDate={DateTime.now().plus({\n        days: 10\n      }).toMillis()}>\n                    <ProposalVoting.BreakdownMultisig approvalsAmount={0} minApprovals={minApprovals} />\n                    <ProposalVoting.Votes>\n                        <DataList.Root itemsCount={0} entityLabel=\"Votes\">\n                            <DataList.Filter searchValue={multisigSearch} onSearchValueChange={setMultisigSearch} />\n                            <DataList.Container emptyState={{\n              heading: 'No votes',\n              description: 'Stage has no votes'\n            }} />\n                            <DataList.Pagination />\n                        </DataList.Root>\n                    </ProposalVoting.Votes>\n                    <ProposalVoting.Details settings={getMultisigSettings(minApprovals)} />\n                </ProposalVoting.Stage>\n            </ProposalVoting.Container>;\n  }\n}",...MultiStage.parameters?.docs?.source},description:{story:"Usage example of the ProposalVoting module component for multi-stage proposals",...MultiStage.parameters?.docs?.description}}},SingleStage.parameters={...SingleStage.parameters,docs:{...SingleStage.parameters?.docs,source:{originalSource:"{\n  args: {\n    title: 'Voting',\n    description: 'The proposal must pass the voting to be accepted and potential onchain actions to execute.',\n    className: 'max-w-[560px]'\n  },\n  render: args => {\n    const [search, setSearch] = useState<string | undefined>('');\n    const filteredVotes = filterVotes(multisigVotes, search);\n    const minApprovals = 5;\n    return <ProposalVoting.Container {...args}>\n                <ProposalVoting.Stage name=\"Token holder voting\" status={ProposalVotingStatus.ACTIVE} startDate={DateTime.now().toMillis()} endDate={DateTime.now().plus({\n        hours: 7\n      }).toMillis()}>\n                    <ProposalVoting.BreakdownMultisig approvalsAmount={multisigVotes.length} minApprovals={minApprovals} />\n                    <ProposalVoting.Votes>\n                        <DataList.Root itemsCount={filteredVotes.length} entityLabel=\"Votes\">\n                            <DataList.Filter searchValue={search} onSearchValueChange={setSearch} />\n                            <DataList.Container>\n                                {filteredVotes.map(vote => <VoteDataListItem.Structure key={vote.voter.address} {...vote} />)}\n                            </DataList.Container>\n                            <DataList.Pagination />\n                        </DataList.Root>\n                    </ProposalVoting.Votes>\n                    <ProposalVoting.Details settings={getMultisigSettings(minApprovals)} />\n                </ProposalVoting.Stage>\n            </ProposalVoting.Container>;\n  }\n}",...SingleStage.parameters?.docs?.source},description:{story:"Usage example of the ProposalVoting module component for single-stage proposals",...SingleStage.parameters?.docs?.description}}};try{MultiStage.displayName="MultiStage",MultiStage.__docgenInfo={description:"Usage example of the ProposalVoting module component for multi-stage proposals",displayName:"MultiStage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/modules/components/proposal/proposalVoting/proposalVoting.stories.tsx#MultiStage"]={docgenInfo:MultiStage.__docgenInfo,name:"MultiStage",path:"src/modules/components/proposal/proposalVoting/proposalVoting.stories.tsx#MultiStage"})}catch(__react_docgen_typescript_loader_error){}try{SingleStage.displayName="SingleStage",SingleStage.__docgenInfo={description:"Usage example of the ProposalVoting module component for single-stage proposals",displayName:"SingleStage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/modules/components/proposal/proposalVoting/proposalVoting.stories.tsx#SingleStage"]={docgenInfo:SingleStage.__docgenInfo,name:"SingleStage",path:"src/modules/components/proposal/proposalVoting/proposalVoting.stories.tsx#SingleStage"})}catch(__react_docgen_typescript_loader_error){}}}]);